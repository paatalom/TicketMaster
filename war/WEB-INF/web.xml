<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1">

    <!-- My configuration -->
    <filter>
        <filter-name>gwtCacheControlFilter</filter-name>
        <filter-class>com.ticketmaster.portal.webui.server.filter.GWTCacheControlFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>gwtCacheControlFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter>
        <filter-name>CharsetFilter</filter-name>
        <filter-class>com.ticketmaster.portal.webui.server.filter.SetCharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>CharsetFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Jasper Servlet -->
    <servlet>
        <servlet-name>JasperServlet</servlet-name>
        <servlet-class>com.ticketmaster.portal.webui.server.servlet.jasper.JasperServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>JasperServlet</servlet-name>
        <url-pattern>/JasperServlet</url-pattern>
    </servlet-mapping>
    <!-- Jasper Servlet -->
    <!-- Device Info Servlet -->
    <servlet>
        <servlet-name>DeviceInfoServlet</servlet-name>
        <servlet-class>com.ticketmaster.portal.webui.server.servlet.deviceinfo.DeviceInfoServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>DeviceInfoServlet</servlet-name>
        <url-pattern>/DeviceInfoServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>CustomJSServlet</servlet-name>
        <servlet-class>com.ticketmaster.portal.webui.server.servlet.customjs.CustomJSServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>CustomJSServlet</servlet-name>
        <url-pattern>/CustomJSServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>ExcelServlet</servlet-name>
        <servlet-class>com.ticketmaster.portal.webui.server.servlet.excel.ExcelServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ExcelServlet</servlet-name>
        <url-pattern>/ExcelServlet</url-pattern>
    </servlet-mapping>

    <!-- Device Info Servlet -->


    <!-- Standard configuration -->

    <!-- standard spring configuration -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
        </param-value>
    </context-param>

    <context-param>
        <param-name>webAppRootKey</param-name>
        <param-value>tutorial.root</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- LDAP Conf -->
    <context-param>
        <description>URL of the ldap-installation</description>
        <param-name>mgtLdapUrl</param-name>
        <param-value>ldap://192.168.19.101:389</param-value>
    </context-param>
    <context-param>
        <description>baseDN used for searches</description>
        <param-name>mgtBaseDN</param-name>
        <param-value>ou=MAGTICOM STRUCTURE,dc=magticom,dc=ge</param-value>
    </context-param>


    <!-- Note: The servlets/filters referenced here are documented in the SDK
        javadoc -->

    <!-- //>FileLoader -->
    <!-- Dynamic Compression -->
    <!--
    <filter>
        <filter-name>CompressionFilter</filter-name>
        <filter-class>com.isomorphic.servlet.CompressionFilter</filter-class>
    </filter>
    -->
    <!-- CompressionFilter for dynamic compression -->
    <!--
    <filter-mapping>
        <filter-name>CompressionFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    -->
    <!-- //<FileLoader -->

    <!--
    <servlet>
        <servlet-name>context</servlet-name>
        <servlet-class>org.springframework.web.context.ContextLoaderServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    -->
    <servlet>
        <servlet-name>view</servlet-name>
        <load-on-startup>1</load-on-startup>
        <servlet-class>com.ticketmaster.portal.webui.server.servlet.velocity.VelocityInit</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ticketmaster</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- The IDACall servlet handles all Built-in DataSource operations -->
    <servlet>
        <servlet-name>IDACall</servlet-name>
        <servlet-class>com.ticketmaster.portal.webui.server.dmi.MyIDACall</servlet-class>
    </servlet>

    <!-- The RESTHandler servlet is like IDACall, but for REST requests -->
    <servlet>
        <servlet-name>RESTHandler</servlet-name>
        <servlet-class>com.isomorphic.servlet.RESTHandler</servlet-class>
    </servlet>

    <!-- The DataSourceLoader servlet returns Javascript representations of
        the dataSources whose ID's are passed to it - it is an alternative to using
        the <loadDS> JSP tag -->
    <servlet>
        <servlet-name>DataSourceLoader</servlet-name>
        <servlet-class>com.isomorphic.servlet.DataSourceLoader</servlet-class>
    </servlet>

    <!-- The screenLoader servlet loads screen definitions in javascript notation -->
    <servlet>
        <servlet-name>screenLoader</servlet-name>
        <servlet-class>com.isomorphic.servlet.ScreenLoaderServlet</servlet-class>
    </servlet>

    <!-- The FileDownload servlet downloads static files, like a webserver -->
    <servlet>
        <servlet-name>FileDownload</servlet-name>
        <servlet-class>com.isomorphic.servlet.FileDownload</servlet-class>
    </servlet>

    <!-- Init: initializes SmartGWT framework. Note that we invoke the Init
        logic from both a Listener and a load-on-startup Servlet in this file - see
        the client-side documentation topic "com.smartgwt.client.docs.ServerInit"
        for a discussion of this. -->
    <listener>
        <listener-class>com.isomorphic.base.InitListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>Init</servlet-name>
        <servlet-class>com.isomorphic.base.Init</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>HttpProxy</servlet-name>
        <servlet-class>com.isomorphic.servlet.HttpProxyServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ExportBlackList</servlet-name>
        <servlet-class>com.ticketmaster.portal.webui.server.servlet.smsBroadcast.ExportBlackList</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ExportNumbers</servlet-name>
        <servlet-class>com.ticketmaster.portal.webui.server.servlet.smsBroadcast.ExportNumbers</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ExportBlackList</servlet-name>
        <url-pattern>/SMSBroadcast/ExportBlackList</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ExportNumbers</servlet-name>
        <url-pattern>/SMSBroadcast/ExportNumbers</url-pattern>
    </servlet-mapping>


    <!-- The PreCache servlet initializes when the servlet engine starts up
        and pre-loads data need for all client requests. This is optional, and improves
        performance of the first few page requests. PreCache cannot be invoked by
        a browser, because there is no "servlet-mapping" defined for it. -->

    <!-- PreCache is disabled by default because of an issue when debugging
        the project for the first time. However, it can be safely enabled when compiling
        with the GWT compiler prior to deployment. See the README.txt for more information. -->

    <!-- <servlet> <servlet-name>PreCache</servlet-name> <servlet-class>com.isomorphic.servlet.PreCache</servlet-class>
        <load-on-startup>2</load-on-startup> </servlet> -->
    <servlet-mapping>
        <servlet-name>view</servlet-name>
        <url-pattern>*.vm</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ticketmaster</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>

    <!-- RPCManager uses this URL by default for Built-in DataSource operations -->
    <servlet-mapping>
        <servlet-name>IDACall</servlet-name>
        <url-pattern>/ticketmaster/sc/IDACall/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>RESTHandler</servlet-name>
        <url-pattern>/ticketmaster/sc/RESTHandler/*</url-pattern>
    </servlet-mapping>

    <!-- DataSourceLoader requests -->
    <servlet-mapping>
        <servlet-name>DataSourceLoader</servlet-name>
        <url-pattern>/sc/DataSourceLoader</url-pattern>
    </servlet-mapping>

    <!-- The screenLoader servlet loads screen definitions in javascript notation -->
    <servlet-mapping>
        <servlet-name>screenLoader</servlet-name>
        <url-pattern>/sc/screenLoader</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>HttpProxy</servlet-name>
        <url-pattern>/ticketmaster/sc/HttpProxy/*</url-pattern>
    </servlet-mapping>

    <!-- Use FileDownload servlet to download all static content that's part
        of the skin, such as image files, so we can set Expires headers and other
        cache control directives. In a production deployment, you'd want to use a
        webserver such as Apache to do this. -->
    <servlet-mapping>
        <servlet-name>FileDownload</servlet-name>
        <url-pattern>/ticketmaster/sc/skins/*</url-pattern>
    </servlet-mapping>

    <!-- serve ISC modules compressed, with expires headers -->
    <servlet-mapping>
        <servlet-name>FileDownload</servlet-name>
        <url-pattern>/ticketmaster/sc/system/modules/*</url-pattern>
    </servlet-mapping>

    <!-- serve ISC development modules compressed, with expires headers -->
    <servlet-mapping>
        <servlet-name>FileDownload</servlet-name>
        <url-pattern>/ticketmaster/sc/system/development/*</url-pattern>
    </servlet-mapping>

    <!-- server skin assets with expires headers -->
    <servlet-mapping>
        <servlet-name>FileDownload</servlet-name>
        <url-pattern>/ticketmaster/sc/system/reference/skin/*</url-pattern>
    </servlet-mapping>

    <!-- General config -->
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>intex.html</welcome-file>
    </welcome-file-list>
    <jsp-config>
        <!-- Isomorphic JSP tags -->
        <taglib>
            <taglib-uri>isomorphic</taglib-uri>
            <taglib-location>/WEB-INF/iscTaglib.xml</taglib-location>
        </taglib>
    </jsp-config>

    <mime-mapping>
        <extension>csv</extension>
        <mime-type>text/csv</mime-type>
    </mime-mapping>

    <mime-mapping>
        <extension>manifest</extension>
        <mime-type>text/cache-manifest</mime-type>
    </mime-mapping>

</web-app>